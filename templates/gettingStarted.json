{
 "meta": {
  "version": "1",
  "name": "Getting Started with Flux",
  "description": "template created from dashboard: Getting Started with Flux",
  "type": "dashboard"
 },
 "content": {
  "data": {
   "type": "dashboard",
   "attributes": {
    "name": "Getting Started with Flux",
    "description": ""
   },
   "relationships": {
    "label": {
     "data": []
    },
    "cell": {
     "data": [
      {
       "type": "cell",
       "id": "03d3aa9d5e506000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d61906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d63506000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d65506000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d67906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d6c906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d79906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d7dd06000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d7f906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d81906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d83906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d87d06000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d8b906000"
      },
      {
       "type": "cell",
       "id": "03d3aa9d8dd06000"
      }
     ]
    },
    "variable": {
     "data": [
      {
       "type": "variable",
       "id": "03d39fa6bd106000"
      }
     ]
    }
   }
  },
  "included": [
   {
    "id": "03d3aa9d5e506000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 1,
     "w": 6,
     "h": 6
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d5e506000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d61906000",
    "type": "cell",
    "attributes": {
     "x": 6,
     "y": 1,
     "w": 6,
     "h": 6
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d61906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d63506000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 11,
     "w": 6,
     "h": 5
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d63506000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d65506000",
    "type": "cell",
    "attributes": {
     "x": 6,
     "y": 11,
     "w": 6,
     "h": 5
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d65506000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d67906000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 7,
     "w": 6,
     "h": 4
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d67906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d6c906000",
    "type": "cell",
    "attributes": {
     "x": 6,
     "y": 7,
     "w": 6,
     "h": 4
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d6c906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d79906000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 16,
     "w": 6,
     "h": 5
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d79906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d7dd06000",
    "type": "cell",
    "attributes": {
     "x": 6,
     "y": 16,
     "w": 6,
     "h": 5
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d7dd06000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d7f906000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 27,
     "w": 6,
     "h": 7
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d7f906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d81906000",
    "type": "cell",
    "attributes": {
     "x": 6,
     "y": 27,
     "w": 6,
     "h": 7
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d81906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d83906000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 21,
     "w": 6,
     "h": 6
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d83906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d87d06000",
    "type": "cell",
    "attributes": {
     "x": 6,
     "y": 21,
     "w": 6,
     "h": 6
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d87d06000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d8b906000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 34,
     "w": 12,
     "h": 1
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d8b906000"
      }
     }
    }
   },
   {
    "id": "03d3aa9d8dd06000",
    "type": "cell",
    "attributes": {
     "x": 0,
     "y": 0,
     "w": 12,
     "h": 1
    },
    "relationships": {
     "view": {
      "data": {
       "type": "view",
       "id": "03d3aa9d8dd06000"
      }
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d5e506000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "## Your First Flux Query\n\nThe Graph vizualization in the cell to the right contains all the data that Telegraf is sending to InfluxDB, using the most basic Flux query we can construct.\n\nEvery Flux query needs at least two things to be valid: first, we'll need a `from()` function to specify where we the data we are going to query is coming from:\n\n```flux\nfrom(bucket: v.bucket)\n```\nWait, what's `v.bucket`? That's a predefined variable that we provided so that you could name your bucket whatever you'd like. Learn more about them [here](https://v2.docs.influxdata.com/v2.0/visualize-data/variables/).\n\nThe second piece we need is to use Flux's \"pipe forward\" (`|>`) operator to forward the data into our next function, `range()`. This will put bounds on the time range of the data being queried.\n\nInfluxDB 2.0 provides built-in variables to make it easier to build dashboards. Here, we're using the `v.timeRange*` variables as parameters in our range function. The dashboard should be set to \"Past 5m\" by default, so this will limit our query to the last five minutes of data. The setting is in the upper-right hand corner; if it's been changed, you should change it back before continuing.\n```\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n```\n\nIf you roll over the graph, you can scroll through the pop-up legend to see all the various time series that Telegraf is collecting. There's a lot there! Too much, actually. This isn't generally a query you'd want to run in production. In fact, we're going to limit the number of results, just in case:\n\n```\n  |> limit(n: 5000)\n```\n\nFor more information, check out the documentation for the [from](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/inputs/from/), [range](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/filter/), and [limit](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/limit/) functions."
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d61906000",
    "attributes": {
     "name": "My First Flux Query",
     "properties": {
      "shape": "chronograf-v2",
      "queries": [
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> limit(n: 5000)",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       }
      ],
      "axes": {
       "x": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y": {
        "bounds": [
         "0",
         "100"
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y2": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       }
      },
      "type": "xy",
      "legend": {},
      "geom": "line",
      "colors": [],
      "note": "# Uh oh, something has gone wrong!\n\nIf you're seeing this note, it means the queries running in this cell aren't returning any data. That might mean that your Telegraf instance hasn't sent any data to InfluxDB during the time range set in the Dashboard, or it might mean there is no data at all. Please install Telegraf or check your Telegraf configuration before continuing.\n\nYou can find detailed information about [setting up Telegraf in the InfluxDB 2.0 Documentation](https://v2.docs.influxdata.com/v2.0/collect-data/use-telegraf/).\n\nYou should configure the following plugins:\n\n- cpu\n- disk\n- network\n\nIf you need additional help, the best place to ask questions is on the [community site](https://community.influxdata.com/).",
      "showNoteWhenEmpty": true
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d63506000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "# Windowing Data\n\nWindowing is a common function that can be used to compute aggregates of the data.\n\n```flux\nfrom(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n```\n\nAnd then we add:\n\n```flux\n  |> window(every: 15s)\n```\n\nThe data is returned to us as an individual time series for each window. If you edit the cell to the right, you can toggle the [\"Raw Data\" view](https://v2.docs.influxdata.com/v2.0/visualize-data/explore-metrics/#visualize-your-query).\n\nYou'll see each of the individual tables. These are each graphed in a different color. If you notice, there are gaps between the windows. This is because Flux only connects the points within the same time series, but all the data is still represented.\n\nFor more information, check out the documentation for the [window](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/window/) function."
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d65506000",
    "attributes": {
     "name": "Windowing Data",
     "properties": {
      "shape": "chronograf-v2",
      "queries": [
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n  |> window(every: 30s)",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       }
      ],
      "axes": {
       "x": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y": {
        "bounds": [
         "0",
         "100"
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y2": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       }
      },
      "type": "xy",
      "legend": {},
      "geom": "line",
      "colors": [],
      "note": "# Uh oh, something has gone wrong!\n\nIf you're seeing this note, it means the queries running in this cell aren't returning any data. That might mean that your Telegraf instance hasn't sent any data to InfluxDB during the time range set in the Dashboard, or it might mean there is no data at all. Please install Telegraf or check your Telegraf configuration before continuing.\n\nYou can find detailed information about [setting up Telegraf in the InfluxDB 2.0 Documentation](https://v2.docs.influxdata.com/v2.0/collect-data/use-telegraf/).\n\nYou should configure the following plugins:\n\n- cpu\n- disk\n- network\n\nIf you need additional help, the best place to ask questions is on the [community site](https://community.influxdata.com/).",
      "showNoteWhenEmpty": true
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d67906000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "## Filtering Data\n\nThat first graph has a lot of data on it, which can make it hard to read. We can use the `filter()` function to continue to narrow down the number of series we return.\n\nWe'll use the same query as before:\n\n```flux\nfrom(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n```\nBut this time we'll continue to narrow down our results using additional `filter()` functions:\n\n```flux\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n```\n\nThe filter function takes a function as a paremeter. This function takes one parameter itself, `r`, which are the results of a query. It then looks for every row where the function returns true. The result, graphed on the right, is a single time series which represents the overall CPU usage across all cores by the user.\n\nFor more information, check out the documentation for the [filter](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/filter/) function."
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d6c906000",
    "attributes": {
     "name": "Filtering Data",
     "properties": {
      "shape": "chronograf-v2",
      "queries": [
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       }
      ],
      "axes": {
       "x": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y": {
        "bounds": [
         "0",
         "100"
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y2": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       }
      },
      "type": "xy",
      "legend": {},
      "geom": "line",
      "colors": [],
      "note": "# Uh oh, something has gone wrong!\n\nIf you're seeing this note, it means the queries running in this cell aren't returning any data. That might mean that your Telegraf instance hasn't sent any data to InfluxDB during the time range set in the Dashboard, or it might mean there is no data at all. Please install Telegraf or check your Telegraf configuration before continuing.\n\nYou can find detailed information about [setting up Telegraf in the InfluxDB 2.0 Documentation](https://v2.docs.influxdata.com/v2.0/collect-data/use-telegraf/).\n\nYou should configure the following plugins:\n\n- cpu\n- disk\n- network\n\nIf you need additional help, the best place to ask questions is on the [community site](https://community.influxdata.com/).",
      "showNoteWhenEmpty": true
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d79906000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "# Aggregation\n\nOnce we've windowed the data, using those windows to calculate an aggregate is a common next step. We'll use the same `from()`, `range()`, and `filter()` functions as before:\n\n```flux\nfrom(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n```\n\nbut instead of using the `window()` function we'll use `aggregateWindow()`, a function written in Flux that will first window the data and then apply an aggregate:\n\n```flux\n  |> aggregateWindow(every: 15s, fn: mean)\n```\n\nChronograf lets us add additional queries in tabs in the cell editor, and we can use that functionality to graph the original data alongside the aggregated data. It's the same query, minus the `aggregateWindow` line.\n\nFor more information, check out the documentation for the [aggregateWindow](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/aggregates/aggregatewindow/) function."
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d7dd06000",
    "attributes": {
     "name": "Aggregated Data",
     "properties": {
      "shape": "chronograf-v2",
      "queries": [
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n  |> aggregateWindow(every: 30s, fn: mean)",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       },
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       }
      ],
      "axes": {
       "x": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y": {
        "bounds": [
         "0",
         "100"
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y2": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       }
      },
      "type": "xy",
      "legend": {},
      "geom": "line",
      "colors": [],
      "note": "# Uh oh, something has gone wrong!\n\nIf you're seeing this note, it means the queries running in this cell aren't returning any data. That might mean that your Telegraf instance hasn't sent any data to InfluxDB during the time range set in the Dashboard, or it might mean there is no data at all. Please install Telegraf or check your Telegraf configuration before continuing.\n\nYou can find detailed information about [setting up Telegraf in the InfluxDB 2.0 Documentation](https://v2.docs.influxdata.com/v2.0/collect-data/use-telegraf/).\n\nYou should configure the following plugins:\n\n- cpu\n- disk\n- network\n\nIf you need additional help, the best place to ask questions is on the [community site](https://community.influxdata.com/).",
      "showNoteWhenEmpty": true
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d7f906000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "# Joins & Maps\n\nJoins and maps are powerful tools that let you combine and transform data. We can use them for a variety of tasks, including performing math across measurements. Let's add the values for CPU usage for the tags `usage_user` and `usage_system`.\n\nFirst, we need two variables to store those series. Those will be `usage_user_series` and `usage_system_series`, and are defined the same way as we did in the previous example.\n\nWith that data stored, we can continue constructing the query with a join:\n\n```\njoin(tables: {key1: usage_user_series, key2: usage_system_series}, \n     on: [\"_time\", \"_measurement\", \"_start\", \"_stop\", \"cpu\", \"host\"], \n     method: \"inner\")\n```\nThis will comine the two tables using an inner join on the columns we specify in the `on` parameter. It will give us a new table with the `_field` columns from the first table renamed to `_field_key1` and `_field_key2`. With the data all in one table, we can use the `map` function to add those two columns together: \n\n```\n  |> map(fn: (r) => ({\n    _time: r._time,\n    _value: r._value_key1 + r._value_key2,\n    _field: r._field_key1 + \"+\" + r._field_key2\n  }))\n```\nFinally, we want to make sure the group key is properly set, and drop the two columns we added, which we no longer need:\n```\n  |> group(columns: [\"_start\", \"_stop\", \"_measurement\", \"_field\", \"cpu\", \"host\"])\n  |> drop(columns: [\"_field_key1\", \"_field_key2\"])\n```\n\nFor more information, check out the documentation for the [join](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/join/), [map](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/map/), [group](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/group/), and [drop](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/transformations/drop/) functions."
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d81906000",
    "attributes": {
     "name": "Joins & Maps",
     "properties": {
      "shape": "chronograf-v2",
      "queries": [
       {
        "text": "usage_user_series = from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n  \nusage_system_series = from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_system\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n  \njoin(tables: {key1: usage_user_series, key2: usage_system_series}, \n     on: [\"_time\", \"_measurement\", \"_start\", \"_stop\", \"cpu\", \"host\"], \n     method: \"inner\")\n  |> map(fn: (r) => ({\n    _time: r._time,\n    _value: r._value_key1 + r._value_key2,\n    _field: r._field_key1 + \"+\" + r._field_key2\n  }))\n  |> group(columns: [\"_start\", \"_stop\", \"_measurement\", \"_field\", \"cpu\", \"host\"])\n  |> drop(columns: [\"_field_key1\", \"_field_key2\"])",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       },
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_system\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       },
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       }
      ],
      "axes": {
       "x": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y": {
        "bounds": [
         "0",
         "100"
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       }
      },
      "type": "xy",
      "legend": {},
      "geom": "line",
      "colors": [],
      "note": "# Uh oh, something has gone wrong!\n\nIf you're seeing this note, it means the queries running in this cell aren't returning any data. That might mean that your Telegraf instance hasn't sent any data to InfluxDB during the time range set in the Dashboard, or it might mean there is no data at all. Please install Telegraf or check your Telegraf configuration before continuing.\n\nYou can find detailed information about [setting up Telegraf in the InfluxDB 2.0 Documentation](https://v2.docs.influxdata.com/v2.0/collect-data/use-telegraf/).\n\nYou should configure the following plugins:\n\n- cpu\n- disk\n- network\n\nIf you need additional help, the best place to ask questions is on the [community site](https://community.influxdata.com/).",
      "showNoteWhenEmpty": true
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d83906000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "# Multiple aggregates using Flux variables\n\nOne thing to be aware of with aggregations is the way it changes the shape of our data. We'll use another feature of Flux, variables, to calculate several aggregates based on stored data. First, we'll create a variable to store the same data we've been working with so far:\n\n```flux\ncpu_usage_user = from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n```\n\nNow that the result has been stored in a variable, we can invoke it and pipe-forward the data first to an aggregateWindow function, and then to the yield function, which will let us specify what the resulting time series will be named:\n\n```flux\ncpu_usage_user \n  |> aggregateWindow(every: 15s, fn: mean)\n  |> yield(name: \"mean_result\")\n```\n\nAnd we can have a second function that applies a different aggregate:\n\n```  \ncpu_usage_user \n  |> aggregateWindow(every: 15s, fn: count)\n  |> yield(name: \"count_result\")\n```\n\nFor more information, check out the documentation for the [yield](https://v2.docs.influxdata.com/v2.0/reference/flux/functions/built-in/outputs/yield/) function."
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d87d06000",
    "attributes": {
     "name": "Multiple Aggregates Using Flux Variables",
     "properties": {
      "shape": "chronograf-v2",
      "queries": [
       {
        "text": "cpu_usage_user = from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")\n  \ncpu_usage_user\n  |> aggregateWindow(every: 30s, fn: mean)\n  |> yield(name: \"mean_result\")\n  \ncpu_usage_user\n  |> aggregateWindow(every: 30s, fn: count)\n  |> yield(name: \"count_result\")",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       },
       {
        "text": "from(bucket: v.bucket)\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"cpu\")\n  |> filter(fn: (r) => r._field == \"usage_user\")\n  |> filter(fn: (r) => r.cpu == \"cpu-total\")",
        "editMode": "advanced",
        "name": "",
        "builderConfig": {
         "buckets": [],
         "tags": [
          {
           "key": "_measurement",
           "values": []
          }
         ],
         "functions": []
        }
       }
      ],
      "axes": {
       "x": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y": {
        "bounds": [
         "0",
         "100"
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       },
       "y2": {
        "bounds": [
         "",
         ""
        ],
        "label": "",
        "prefix": "",
        "suffix": "",
        "base": "10",
        "scale": "linear"
       }
      },
      "type": "xy",
      "legend": {},
      "geom": "line",
      "colors": [],
      "note": "# Uh oh, something has gone wrong!\n\nIf you're seeing this note, it means the queries running in this cell aren't returning any data. That might mean that your Telegraf instance hasn't sent any data to InfluxDB during the time range set in the Dashboard, or it might mean there is no data at all. Please install Telegraf or check your Telegraf configuration before continuing.\n\nYou can find detailed information about [setting up Telegraf in the InfluxDB 2.0 Documentation](https://v2.docs.influxdata.com/v2.0/collect-data/use-telegraf/).\n\nYou should configure the following plugins:\n\n- cpu\n- disk\n- network\n\nIf you need additional help, the best place to ask questions is on the [community site](https://community.influxdata.com/).",
      "showNoteWhenEmpty": true
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d8b906000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "## Thank you for joining us!\n\nIf you have any questions on your journey, please check out the [community site](https://community.influxdata.com)."
     }
    }
   },
   {
    "type": "view",
    "id": "03d3aa9d8dd06000",
    "attributes": {
     "name": "Name this Cell",
     "properties": {
      "shape": "chronograf-v2",
      "type": "markdown",
      "note": "#\nThis dashboard is designed to get you started with the [Flux language](https://v2.docs.influxdata.com/v2.0/reference/flux/). In order to use this, you will need to have data in your InfluxDB 2.0 instance. Just follow the instructions to [set up the Telegraf data agent](https://v2.docs.influxdata.com/v2.0/collect-data/use-telegraf/) from our documentation and you should be all set. If you have data in your system and still don't see any graphs, click the `Variables` button in the top right of the dashboard and select the bucket with your data."
     }
    }
   },
   {
    "id": "03d39fa6bd106000",
    "type": "variable",
    "attributes": {
     "name": "bucket",
     "arguments": {
      "type": "query",
      "values": {
       "query": "buckets()\n  |> rename(columns: {name: \"_value\"})\n  |> keep(columns: [\"_value\"])\n",
       "language": "flux"
      }
     },
     "selected": null
    },
    "relationships": {
     "label": {
      "data": []
     }
    }
   }
  ]
 },
 "labels": []
}
